# Chart.yaml
apiVersion: v2
name: gke-cluster
description: A Helm chart for GKE cluster infrastructure
type: application
version: 0.1.0
appVersion: "1.0.0"

# values.yaml
clusterName: my-gke-cluster
region: us-central1
project: my-gcp-project

# Configure the GKE cluster
clusterConfig:
  releaseChannel: REGULAR
  initialNodeCount: 3
  masterAuthorizedNetworks:
    enabled: true
    cidrBlocks:
      - cidrBlock: 10.0.0.0/16
        displayName: VPC
  privateCluster:
    enabled: true
    masterIpv4CidrBlock: 172.16.0.0/28
  networkPolicy:
    enabled: true
  masterAuth:
    clientCertificate:
      enabled: false
  legacyAbac:
    enabled: false
  loggingService: logging.googleapis.com/kubernetes
  monitoringService: monitoring.googleapis.com/kubernetes
  
# Node pools configuration
nodePools:
  - name: default-pool
    initialNodeCount: 3
    autoscaling:
      enabled: true
      minNodeCount: 3
      maxNodeCount: 10
    management:
      autoRepair: true
      autoUpgrade: true
    config:
      machineType: e2-standard-4
      diskSizeGb: 100
      diskType: pd-standard
      imageType: COS_CONTAINERD
      preemptible: false
      serviceAccount: gke-nodes@my-gcp-project.iam.gserviceaccount.com
      oauthScopes:
        - https://www.googleapis.com/auth/cloud-platform